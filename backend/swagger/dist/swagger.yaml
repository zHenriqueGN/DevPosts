swagger: "2.0"
info:
  title: Dev Posts
  description: A social media API for minimalistic devs
  version: 1.0.0

host: localhost:8000
basePath: /api/v1
schemes:
  - "http"
tags:
  - name: auth
    description: Endpoints related to authentication
  - name: users
    description: Endpoints related to users
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header
    description: >-
      Enter the token with the "Bearer " prefix, e.g. "Bearer abcde12345".

paths:
  /auth/login:
    post:
      summary: login route
      description: Endpoint to login
      tags:
        - auth
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: User object to be logged in
          required: true
          schema:
            type: object
            properties: 
              email:
                type: string
                example: john.garfield@gmail.com
              password:
                type: string
                example: 12345
      responses:
        '200':
          description: Ok - User successfully logged in.
        '401':
          description: Unauthorized - Wrong email or password
        '422':
          description: Unprocessable Entity - The request contains valid data, but it cannot be processed due to validation or business logic errors.
        '500':
          description: Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.
  /users:
    get:
      summary: Get users
      description: Endpoint to get users
      tags:
        - users
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: query
          name: username
          description: Username to be filtered
          type: string
      responses:
        '200':
          description: Ok - Users returned successfully.
        '500':
          description: Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.
    post:
      summary: Create a new user
      description: Endpoint to create a new user
      tags:
        - auth
        - users
      consumes:
        - application/json
      produces:
        - application/json        
      parameters:
        - in: body
          name: user
          description: User object to be created
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
                example: John Garfield
              userName:
                type: string
                example: john.garfield
              email:
                type: string
                example: john.garfield@gmail.com
              password:
                type: string
                example: 12345
      responses:
        '201':
          description: Created - User created successfully.
        '400':
          description: Bad request - Invalid user data.
        '422':
          description: Unprocessable Entity - The request contains valid data, but it cannot be processed due to validation or business logic errors.
        '500':
          description: Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.
  /users/{id}:
    get:
      summary: Get user
      description: Endpoint to get an user
      tags:
        - users
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          type: integer
          required: true
      responses:
        '200':
          description: Ok - User returned successfully.
        '400':
          description: Bad request - Invalid userId.
        '404':
          description: Not found - Any user match the provided userId.
        '500':
          description: Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.
    put:
      summary: Update user
      description: Endpoint to update an user
      tags:
        - users
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          type: integer
          required: true
        - in: body
          name: user
          description: User object to be updated
          required: true
          schema:
            type: object
            properties: 
              name:
                type: string
                example: John Garfield
              userName:
                type: string
                example: john.garfield
              email:
                type: string
                example: john.garfield@gmail.com
      responses:
        '204':
          description: No content - User updated successfully.
        '400':
          description: Bad request - Invalid user data.
        '403':
          description: Forbidden - You've tried to update someone else's user.
        '404':
          description: Not found - Any user match the provided userId.               
        '422':
          description: Unprocessable Entity - The request contains valid data, but it cannot be processed due to validation or business logic errors.
        '500':
          description: Internal Server Error - The server encountered an unexpected condition that prevented it from fulfilling the request.                
              